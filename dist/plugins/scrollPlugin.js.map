{"version":3,"file":"scrollPlugin.js","sources":["../../src/plugins/scrollPlugin.ts"],"sourcesContent":["import { Plugin } from \"../types/options\";\nimport { Instance } from \"../types/instance\";\nfunction delta(e: WheelEvent) {\n  return Math.max(-1, Math.min(1, (e as any).wheelDelta || -e.deltaY));\n}\n\nconst scroll = (e: WheelEvent) => {\n  e.preventDefault();\n  const ev = new CustomEvent(\"increment\", {\n    bubbles: true,\n  });\n  (ev as any).delta = delta(e);\n  (e.target as HTMLInputElement).dispatchEvent(ev);\n};\n\nfunction scrollMonth(fp: Instance) {\n  return (e: WheelEvent) => {\n    e.preventDefault();\n    const mDelta = delta(e);\n    fp.changeMonth(mDelta);\n  };\n}\n\nfunction scrollPlugin(): Plugin {\n  return function(fp) {\n    const monthScroller = scrollMonth(fp);\n    return {\n      onReady() {\n        if (fp.timeContainer) {\n          fp.timeContainer.addEventListener(\"wheel\", scroll);\n        }\n\n        fp.yearElements.forEach(yearElem =>\n          yearElem.addEventListener(\"wheel\", scroll)\n        );\n\n        fp.monthElements.forEach(monthElem =>\n          monthElem.addEventListener(\"wheel\", monthScroller)\n        );\n\n        fp.loadedPlugins.push(\"scroll\");\n      },\n      onDestroy() {\n        if (fp.timeContainer) {\n          fp.timeContainer.removeEventListener(\"wheel\", scroll);\n        }\n\n        fp.yearElements.forEach(yearElem =>\n          yearElem.removeEventListener(\"wheel\", scroll)\n        );\n\n        fp.monthElements.forEach(monthElem =>\n          monthElem.removeEventListener(\"wheel\", monthScroller)\n        );\n      },\n    };\n  };\n}\n\nexport default scrollPlugin;\n"],"names":[],"mappings":";;;;;;EAEA,SAAS,KAAK,CAAC,CAAa;MAC1B,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAG,CAAS,CAAC,UAAU,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;EACvE,CAAC;EAED,IAAM,MAAM,GAAG,UAAC,CAAa;MAC3B,CAAC,CAAC,cAAc,EAAE,CAAC;MACnB,IAAM,EAAE,GAAG,IAAI,WAAW,CAAC,WAAW,EAAE;UACtC,OAAO,EAAE,IAAI;OACd,CAAC,CAAC;MACF,EAAU,CAAC,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;MAC5B,CAAC,CAAC,MAA2B,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;EACnD,CAAC,CAAC;EAEF,SAAS,WAAW,CAAC,EAAY;MAC/B,OAAO,UAAC,CAAa;UACnB,CAAC,CAAC,cAAc,EAAE,CAAC;UACnB,IAAM,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;UACxB,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;OACxB,CAAC;EACJ,CAAC;EAED,SAAS,YAAY;MACnB,OAAO,UAAS,EAAE;UAChB,IAAM,aAAa,GAAG,WAAW,CAAC,EAAE,CAAC,CAAC;UACtC,OAAO;cACL,OAAO;kBACL,IAAI,EAAE,CAAC,aAAa,EAAE;sBACpB,EAAE,CAAC,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;mBACpD;kBAED,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,UAAA,QAAQ;sBAC9B,OAAA,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,CAAC;mBAAA,CAC3C,CAAC;kBAEF,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,UAAA,SAAS;sBAChC,OAAA,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,aAAa,CAAC;mBAAA,CACnD,CAAC;kBAEF,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;eACjC;cACD,SAAS;kBACP,IAAI,EAAE,CAAC,aAAa,EAAE;sBACpB,EAAE,CAAC,aAAa,CAAC,mBAAmB,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;mBACvD;kBAED,EAAE,CAAC,YAAY,CAAC,OAAO,CAAC,UAAA,QAAQ;sBAC9B,OAAA,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,MAAM,CAAC;mBAAA,CAC9C,CAAC;kBAEF,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,UAAA,SAAS;sBAChC,OAAA,SAAS,CAAC,mBAAmB,CAAC,OAAO,EAAE,aAAa,CAAC;mBAAA,CACtD,CAAC;eACH;WACF,CAAC;OACH,CAAC;EACJ,CAAC;;;;;;;;"}