{"version":3,"file":"confirmDate.js","sources":["../../../src/plugins/confirmDate/confirmDate.ts"],"sourcesContent":["import { Instance } from \"../../types/instance\";\nimport { Plugin } from \"../../types/options\";\n\nexport interface Config {\n  confirmIcon?: string;\n  confirmText?: string;\n  showAlways?: boolean;\n  theme?: string;\n}\n\nconst defaultConfig: Config = {\n  confirmIcon:\n    \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='17' height='17' viewBox='0 0 17 17'> <g> </g> <path d='M15.418 1.774l-8.833 13.485-4.918-4.386 0.666-0.746 4.051 3.614 8.198-12.515 0.836 0.548z' fill='#000000' /> </svg>\",\n  confirmText: \"OK \",\n  showAlways: false,\n  theme: \"light\",\n};\n\nfunction confirmDatePlugin(pluginConfig: Config): Plugin {\n  const config = { ...defaultConfig, ...pluginConfig };\n  let confirmContainer: HTMLDivElement;\n  const confirmButtonCSSClass = \"flatpickr-confirm\";\n\n  return function(fp: Instance) {\n    if (fp.config.noCalendar || fp.isMobile) return {};\n    return {\n      onKeyDown(_: Date[], __: string, ___: Instance, e: KeyboardEvent) {\n        if (fp.config.enableTime && e.key === \"Tab\" && e.target === fp.amPM) {\n          e.preventDefault();\n          confirmContainer.focus();\n        } else if (e.key === \"Enter\" && e.target === confirmContainer)\n          fp.close();\n      },\n\n      onReady() {\n        confirmContainer = fp._createElement<HTMLDivElement>(\n          \"div\",\n          `${confirmButtonCSSClass} ${config.showAlways ? \"visible\" : \"\"} ${\n            config.theme\n          }Theme`,\n          config.confirmText\n        );\n\n        confirmContainer.tabIndex = -1;\n        confirmContainer.innerHTML += config.confirmIcon;\n\n        confirmContainer.addEventListener(\"click\", fp.close);\n        fp.calendarContainer.appendChild(confirmContainer);\n\n        fp.loadedPlugins.push(\"confirmDate\");\n      },\n      ...(!config.showAlways\n        ? {\n            onChange: function(_: Date[], dateStr: string) {\n              const showCondition =\n                fp.config.enableTime ||\n                fp.config.mode === \"multiple\" ||\n                fp.loadedPlugins.indexOf(\"monthSelect\") !== -1;\n\n              const localConfirmContainer = fp.calendarContainer.querySelector(\n                `.${confirmButtonCSSClass}`\n              );\n\n              if (!localConfirmContainer) return;\n\n              if (\n                dateStr &&\n                !fp.config.inline &&\n                showCondition &&\n                localConfirmContainer\n              )\n                return localConfirmContainer.classList.add(\"visible\");\n\n              localConfirmContainer.classList.remove(\"visible\");\n            },\n          }\n        : {}),\n    };\n  };\n}\n\nexport default confirmDatePlugin;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAUA,IAAM,aAAa,GAAW;QAC5B,WAAW,EACT,oRAAoR;QACtR,WAAW,EAAE,KAAK;QAClB,UAAU,EAAE,KAAK;QACjB,KAAK,EAAE,OAAO;KACf,CAAC;IAEF,SAAS,iBAAiB,CAAC,YAAoB;QAC7C,IAAM,MAAM,yBAAQ,aAAa,GAAK,YAAY,CAAE,CAAC;QACrD,IAAI,gBAAgC,CAAC;QACrC,IAAM,qBAAqB,GAAG,mBAAmB,CAAC;QAElD,OAAO,UAAS,EAAY;YAC1B,IAAI,EAAE,CAAC,MAAM,CAAC,UAAU,IAAI,EAAE,CAAC,QAAQ;gBAAE,OAAO,EAAE,CAAC;YACnD,kBACE,SAAS,EAAT,UAAU,CAAS,EAAE,EAAU,EAAE,GAAa,EAAE,CAAgB;oBAC9D,IAAI,EAAE,CAAC,MAAM,CAAC,UAAU,IAAI,CAAC,CAAC,GAAG,KAAK,KAAK,IAAI,CAAC,CAAC,MAAM,KAAK,EAAE,CAAC,IAAI,EAAE;wBACnE,CAAC,CAAC,cAAc,EAAE,CAAC;wBACnB,gBAAgB,CAAC,KAAK,EAAE,CAAC;qBAC1B;yBAAM,IAAI,CAAC,CAAC,GAAG,KAAK,OAAO,IAAI,CAAC,CAAC,MAAM,KAAK,gBAAgB;wBAC3D,EAAE,CAAC,KAAK,EAAE,CAAC;iBACd;gBAED,OAAO,EAAP;oBACE,gBAAgB,GAAG,EAAE,CAAC,cAAc,CAClC,KAAK,EACF,qBAAqB,UAAI,MAAM,CAAC,UAAU,GAAG,SAAS,GAAG,EAAE,UAC5D,MAAM,CAAC,KAAK,UACP,EACP,MAAM,CAAC,WAAW,CACnB,CAAC;oBAEF,gBAAgB,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;oBAC/B,gBAAgB,CAAC,SAAS,IAAI,MAAM,CAAC,WAAW,CAAC;oBAEjD,gBAAgB,CAAC,gBAAgB,CAAC,OAAO,EAAE,EAAE,CAAC,KAAK,CAAC,CAAC;oBACrD,EAAE,CAAC,iBAAiB,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;oBAEnD,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;iBACtC,KACG,CAAC,MAAM,CAAC,UAAU;kBAClB;oBACE,QAAQ,EAAE,UAAS,CAAS,EAAE,OAAe;wBAC3C,IAAM,aAAa,GACjB,EAAE,CAAC,MAAM,CAAC,UAAU;4BACpB,EAAE,CAAC,MAAM,CAAC,IAAI,KAAK,UAAU;4BAC7B,EAAE,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;wBAEjD,IAAM,qBAAqB,GAAG,EAAE,CAAC,iBAAiB,CAAC,aAAa,CAC9D,MAAI,qBAAuB,CAC5B,CAAC;wBAEF,IAAI,CAAC,qBAAqB;4BAAE,OAAO;wBAEnC,IACE,OAAO;4BACP,CAAC,EAAE,CAAC,MAAM,CAAC,MAAM;4BACjB,aAAa;4BACb,qBAAqB;4BAErB,OAAO,qBAAqB,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;wBAExD,qBAAqB,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;qBACnD;iBACF;kBACD,EAAE,GACN;SACH,CAAC;IACJ,CAAC;;;;;;;;"}